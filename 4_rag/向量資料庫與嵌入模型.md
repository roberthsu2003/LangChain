# 向量資料庫與嵌入模型

## 向量資料庫 (Vector Database)

### 什麼是向量資料庫？

向量資料庫是一種專門用於儲存和檢索高維向量數據的資料庫系統。與傳統資料庫不同，向量資料庫針對相似性搜索進行了優化，能夠快速找到與查詢向量最相似的資料。

### 主要特點

- **高維數據支持**：可以處理數百到數千維度的向量數據
- **相似性搜索**：使用餘弦相似度、歐氏距離等度量方式進行快速檢索
- **可擴展性**：能夠處理大規模向量數據集
- **索引優化**：使用 HNSW、IVF 等演算法加速搜索效率

### 常見的向量資料庫

1. **Pinecone**：雲端向量資料庫服務
2. **Weaviate**：開源向量搜索引擎
3. **Milvus**：開源分散式向量資料庫
4. **Chroma**：輕量級嵌入式向量資料庫
5. **Qdrant**：高效能向量搜索引擎
6. **FAISS**：Facebook 開發的相似性搜索庫

### 應用場景

- **語義搜索**：根據內容含義而非關鍵字進行搜索
- **推薦系統**：找出相似的商品、內容或用戶
- **問答系統**：檢索相關文檔片段來回答問題
- **圖像搜索**：以圖找圖的應用
- **異常檢測**：識別不尋常的數據模式

---

## 嵌入模型 (Embedding Model)

### 什麼是嵌入模型？

嵌入模型是一種將文本、圖像或其他數據轉換為固定長度數值向量的機器學習模型。這些向量能夠捕捉原始數據的語義信息，使得相似的內容在向量空間中距離較近。

### 工作原理

1. **輸入處理**：接收文本、圖像等原始數據
2. **編碼轉換**：通過神經網絡將數據映射到向量空間
3. **向量輸出**：生成固定維度的數值向量（如 384、768、1536 維）

### 常見的嵌入模型

#### 文本嵌入模型

1. **OpenAI Embeddings**
   - text-embedding-3-small (1536 維)
   - text-embedding-3-large (3072 維)
   - text-embedding-ada-002 (1536 維)

2. **開源模型**
   - sentence-transformers (BERT 系列)
   - all-MiniLM-L6-v2 (384 維)
   - all-mpnet-base-v2 (768 維)
   - BGE (BAAI General Embedding)

3. **多語言模型**
   - multilingual-e5-large
   - paraphrase-multilingual-MiniLM-L12-v2

#### 圖像嵌入模型

- CLIP (OpenAI)
- ResNet
- Vision Transformers (ViT)

### 嵌入模型的特性

- **語義理解**：捕捉文本的真實含義，而非僅僅匹配關鍵字
- **維度固定**：無論輸入長度如何，輸出向量維度始終一致
- **可比較性**：相似內容的向量在空間中距離較近
- **跨語言能力**：多語言模型可處理不同語言的文本

### 選擇嵌入模型的考量因素

1. **準確性**：模型在特定任務上的表現
2. **維度大小**：影響儲存成本和檢索速度
3. **處理速度**：生成嵌入向量的效率
4. **成本**：API 調用費用或計算資源需求
5. **語言支持**：是否支持目標語言
6. **上下文長度**：能處理的最大 token 數量

---

## 向量資料庫與嵌入模型的配合使用

### 典型工作流程

1. **文檔處理**：將長文本分割成較小的片段（chunks）
2. **生成嵌入**：使用嵌入模型將每個片段轉換為向量
3. **向量儲存**：將向量及其元數據存入向量資料庫
4. **查詢處理**：將用戶查詢轉換為向量
5. **相似性搜索**：在向量資料庫中找出最相關的片段
6. **結果返回**：提供最相關的文檔內容

### RAG (Retrieval-Augmented Generation) 應用

在 RAG 系統中，向量資料庫和嵌入模型扮演關鍵角色：

1. 使用嵌入模型將知識庫文檔轉換為向量
2. 將向量存入向量資料庫
3. 用戶提問時，將問題轉換為向量
4. 從向量資料庫檢索相關內容
5. 將檢索結果與問題一起傳給 LLM 生成回答

### 最佳實踐

- **匹配使用**：檢索和索引應使用相同的嵌入模型
- **適當分塊**：根據內容特性選擇合適的文本分割策略
- **元數據管理**：保存必要的元數據以便過濾和追溯
- **定期更新**：隨時更新向量資料庫以保持資訊最新
- **性能監控**：追蹤檢索質量和系統性能指標
